/**
 * @fileoverview Global Styles Entry Point
 *
 * This file imports all modular CSS files.
 * DO NOT add styles directly here — use the appropriate module in src/styles/.
 *
 * Module Directory:
 * - src/styles/tokens/    → Design token placeholders
 * - src/styles/base/      → Reset, html/body, scrollbar
 * - src/styles/effects/   → Glow, glass, blur
 * - src/styles/animations/→ Keyframes, gradient backgrounds
 * - src/styles/components/→ Sidebar, divider, icons, sections
 *
 * @see docs/theming/CSS-Modularization-Migration-Plan.md
 */

@import "tailwindcss";

/* ============================================================================
   MODULAR STYLE IMPORTS
   
   These must come AFTER @import "tailwindcss" for proper cascade ordering.
   Order: tokens → base → effects → animations → components
   ============================================================================ */

/* Design Tokens */
@import "../styles/tokens/_index.css";

/* Base Styles */
@import "../styles/base/_index.css";

/* Effects — inlined below to survive Tailwind v4 compilation */
/* @import "../styles/effects/_index.css"; */

/* Animations */
@import "../styles/animations/_index.css";

/* Component Styles */
@import "../styles/components/_index.css";

/* ============================================================================
   TAILWIND V4 DARK MODE VARIANT
   ============================================================================ */

@custom-variant dark (&:is(.dark *));

/* ============================================================================
   TAILWIND V4 THEME CONFIGURATION
   Maps CSS variables to Tailwind utility classes
   ============================================================================ */

@theme inline {
  /* Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Sidebar Colors */
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  /* Chart Colors */
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
  --color-chart-6: hsl(var(--chart-6));
  --color-chart-7: hsl(var(--chart-7));
  --color-chart-8: hsl(var(--chart-8));
  --color-chart-9: hsl(var(--chart-9));
  --color-chart-10: hsl(var(--chart-10));
  --color-chart-11: hsl(var(--chart-11));
  --color-chart-12: hsl(var(--chart-12));

  /* Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);

  /* Fonts */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* ============================================================================
   THEME DEFAULTS (FALLBACKS)

   These are CRITICAL fallbacks that prevent white flash before JavaScript.
   Theme colors are INJECTED via blocking script — see layout.tsx.

   DO NOT add additional colors here — use themes/*.ts
   ============================================================================ */

:root {
  --header-height: 4rem;
  /* Light mode defaults - must match neutral theme light */
  --background: 0 0% 99%;
  --foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --card: 0 0% 99%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 99%;
  --popover-foreground: 240 10% 3.9%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 10% 3.9%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --sidebar: 0 0% 98%;
  --sidebar-foreground: 220 9% 46%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 220 13% 91%;
  --sidebar-ring: 217.2 91.2% 59.8%;
  --radius: 0.5rem;
  --scrollbar-thumb: 240 5% 64.9%;
  --scrollbar-track: transparent;
  --scrollbar-thumb-hover: 0 0% 35%;
  --scrollbar-thumb-active: 0 0% 25%;
  --gradient-bg-1: 240 6% 10%;
  --gradient-bg-2: 240 6% 15%;
  --gradient-bg-3: 220 6% 12%;
  --gradient-bg-4: 240 6% 8%;
  --gradient-from: 0 0% 27%;
  --gradient-to: 0 0% 5%;
  --section: 0 0% 100%;
  --section-border: 240 5.9% 90%;
  --chart-1: 220 70% 50%;
  --chart-2: 350 70% 50%;
  --chart-3: 35 80% 50%;
  --chart-4: 150 60% 45%;
  --chart-5: 240 60% 60%;
  --chart-6: 190 70% 50%;
  --chart-7: 270 60% 60%;
  --chart-8: 25 80% 55%;
  --chart-9: 80 70% 50%;
  --chart-10: 170 70% 40%;
  --chart-11: 330 70% 60%;
  --chart-12: 30 40% 45%;
  --chart-inst-1: 16 90% 60%;
  --chart-inst-2: 160 84% 39%;
  --chart-inst-3: 280 65% 60%;
  --chart-inst-4: 320 70% 60%;
  --chart-inst-5: 35 90% 55%;
  --chart-inst-6: 190 90% 40%;
  --chart-inst-7: 250 70% 65%;
  --chart-inst-8: 70 80% 45%;
  --chart-inst-9: 350 85% 60%;
  --chart-inst-10: 120 70% 45%;
  --chart-inst-11: 220 80% 55%;
  --chart-inst-12: 55 90% 50%;
  --chart-inst-13: 175 80% 45%;
  --chart-inst-14: 265 75% 60%;
  --chart-inst-15: 300 80% 60%;
  --chart-inst-16: 140 70% 50%;
  --text-primary: 222.2 47.4% 11.2%;
  --text-secondary: 215.4 16.3% 46.9%;
  --text-muted: 215.4 16.3% 66.9%;
  --text-disabled: 215.4 16.3% 76.9%;
  --text-inverse: 210 40% 98%;
  --bg-primary: 0 0% 100%;
  --bg-secondary: 210 40% 96.1%;
  --bg-tertiary: 210 40% 92.1%;
  --bg-elevated: 0 0% 100%;
  --border-hover: 214.3 31.8% 81.4%;
  --border-focus: 262.1 83.3% 57.8%;
  --color-success: 142.1 76.2% 36.3%;
  --color-warning: 38 92% 50%;
  --color-error: 0 84.2% 60.2%;
  --color-info: 199 89% 48%;
  /* FX tech colors - dynamically reference primary for theme consistency */
  --fx-tech-glow: var(--primary);
  --fx-tech-line: var(--primary);
  --fx-tech-border: var(--primary);
  --console-button-size: 2.75rem;
  --console-icon-size: 1.5rem;
  --console-spread-radius: 0.75rem;
  color-scheme: light;
}

.dark {
  /* Dark mode defaults - must match neutral theme dark */
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --sidebar: 240 5.9% 10%;
  --sidebar-foreground: 240 4.8% 95.9%;
  --sidebar-primary: 224.3 76.3% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 240 4.8% 95.9%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 217.2 91.2% 59.8%;
  --radius: 0.5rem;
  --scrollbar-thumb: 240 5% 64.9%;
  --scrollbar-track: transparent;
  --scrollbar-thumb-hover: 0 0% 75%;
  --scrollbar-thumb-active: 0 0% 85%;
  --gradient-bg-1: 0 0% 98%;
  --gradient-bg-2: 0 0% 92%;
  --gradient-bg-3: 0 0% 95%;
  --gradient-bg-4: 0 0% 88%;
  --gradient-from: 0 0% 90%;
  --gradient-to: 0 0% 70%;
  --section: 240 10% 6%;
  --section-border: 240 3.7% 15.9%;
  --chart-1: 220 80% 60%;
  --chart-2: 350 80% 60%;
  --chart-3: 35 90% 60%;
  --chart-4: 150 70% 55%;
  --chart-5: 240 70% 70%;
  --chart-6: 190 80% 60%;
  --chart-7: 270 70% 70%;
  --chart-8: 25 90% 65%;
  --chart-9: 80 80% 60%;
  --chart-10: 170 80% 50%;
  --chart-11: 330 80% 70%;
  --chart-12: 30 50% 55%;
  --chart-inst-1: 16 90% 65%;
  --chart-inst-2: 160 70% 50%;
  --chart-inst-3: 280 80% 70%;
  --chart-inst-4: 320 80% 70%;
  --chart-inst-5: 35 90% 60%;
  --chart-inst-6: 190 80% 50%;
  --chart-inst-7: 250 80% 75%;
  --chart-inst-8: 70 80% 55%;
  --chart-inst-9: 350 85% 65%;
  --chart-inst-10: 120 70% 55%;
  --chart-inst-11: 220 80% 65%;
  --chart-inst-12: 55 90% 60%;
  --chart-inst-13: 175 80% 55%;
  --chart-inst-14: 265 75% 70%;
  --chart-inst-15: 300 80% 70%;
  --chart-inst-16: 140 70% 60%;
  --text-primary: 210 20% 90%;
  --text-secondary: 215 20% 70%;
  --text-muted: 215 15% 50%;
  --text-disabled: 215 10% 35%;
  --text-inverse: 222.2 84% 4.9%;
  --bg-primary: 222.2 84% 4.9%;
  --bg-secondary: 217.2 32.6% 12.5%;
  --bg-tertiary: 217.2 32.6% 17.5%;
  --bg-elevated: 222.2 84% 8%;
  --border-hover: 217.2 32.6% 30%;
  --border-focus: 263.4 70% 50.4%;
  --color-success: 142.1 70% 45%;
  --color-warning: 38 92% 50%;
  --color-error: 0 72% 51%;
  --color-info: 199 89% 48%;
  /* FX tech colors - dynamically reference primary for theme consistency */
  --fx-tech-glow: var(--primary);
  --fx-tech-line: var(--primary);
  --fx-tech-border: var(--primary);
  --console-button-size: 2.75rem;
  --console-icon-size: 1.5rem;
  --console-spread-radius: 0.75rem;
  color-scheme: dark;
}

/* ============================================================================
   INLINE EFFECT STYLES
   
   IMPORTANT: Tailwind v4 strips raw backdrop-filter from custom CSS rules.
   Must use @apply with Tailwind utility classes for backdrop-filter properties.
   The corresponding files in src/styles/effects/ are kept for documentation.
   ============================================================================ */

/* --- Glass Effect --- */
.shell-glass {
  background-color: hsl(var(--background) / 0.05);
  @apply backdrop-blur-[12px];
  box-shadow: inset 0 -1px 0 0 hsl(var(--border) / 0.4);
}

.dark .shell-glass {
  background-color: hsl(var(--background) / 0.05);
  @apply backdrop-blur-[12px];
  box-shadow: inset 0 -1px 0 0 hsl(var(--border) / 0.1);
}

.glass-extreme {
  @apply backdrop-blur-3xl backdrop-saturate-200 backdrop-contrast-125;
}

.shell-glass-middle {
  position: relative;
  isolation: isolate;
  overflow: hidden;
  background-image:
    radial-gradient(circle at 48% 30%, hsl(var(--primary) / 0.15) 0%, transparent 45%),
    radial-gradient(circle at 50% 65%, hsl(var(--background) / 0.15) 0%, transparent 70%),
    linear-gradient(180deg, hsl(var(--background) / 0.12), hsl(var(--background) / 0.04));
  box-shadow:
    inset 0 0 80px hsl(var(--background) / 0.35),
    inset 0 0 120px hsl(var(--primary) / 0.12);
  border: 1px solid hsl(var(--border) / 0.25);
  mask-image: radial-gradient(circle at center, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.65) 60%, rgba(0, 0, 0, 0.2) 85%, rgba(0, 0, 0, 0));
  -webkit-mask-image: radial-gradient(circle at center, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.65) 60%, rgba(0, 0, 0, 0.2) 85%, rgba(0, 0, 0, 0));
  @apply backdrop-blur-[60px] backdrop-saturate-[1.65] backdrop-brightness-110;
}

.shell-glass-middle::before {
  content: "";
  position: absolute;
  inset: -10%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.12), transparent 60%);
  filter: blur(40px);
  opacity: 0.35;
  pointer-events: none;
}

.shell-glass-middle::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: radial-gradient(circle at center, transparent 45%, hsl(var(--background) / 0.25) 70%, hsl(var(--background) / 0.08) 85%, transparent 100%);
  filter: blur(26px);
  opacity: 0.85;
  z-index: -1;
  pointer-events: none;
}

.dark .shell-glass-middle {
  background-image:
    radial-gradient(circle at 50% 45%, hsl(var(--background) / 0.4) 0%, hsl(var(--background) / 0.2) 50%, hsl(var(--background) / 0.08) 80%, transparent 100%),
    linear-gradient(180deg, hsl(var(--background) / 0.12), hsl(var(--background) / 0.04));
  box-shadow:
    inset 0 0 70px hsl(var(--primary) / 0.18),
    inset 0 0 140px hsl(var(--accent) / 0.25);
}

.dark .shell-glass-middle::after {
  background: radial-gradient(circle at center, transparent 40%, hsl(var(--background) / 0.35) 70%, hsl(var(--background) / 0.2) 85%, transparent 100%);
  opacity: 0.95;
}

.shell-middle-scroll {
  position: relative;
  border-radius: inherit;
  background-image:
    radial-gradient(circle at 45% 35%, hsl(var(--background) / 0.28) 0%, hsl(var(--background) / 0.16) 45%, transparent 78%),
    radial-gradient(circle at 50% 70%, hsl(var(--background) / 0.12) 0%, transparent 70%),
    linear-gradient(180deg, hsl(var(--background) / 0.18), hsl(var(--background) / 0.05));
  box-shadow:
    inset 0 0 48px hsl(var(--background) / 0.16),
    inset 0 0 2px hsl(var(--border) / 0.35);
  @apply backdrop-blur-[60px] backdrop-saturate-[1.65] backdrop-brightness-110;
}

.shell-middle-scroll::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at center, transparent 35%, hsl(var(--background) / 0.22) 78%, transparent 100%);
  opacity: 0.55;
  pointer-events: none;
}

.shell-middle-scroll::after {
  content: "";
  position: absolute;
  inset: -12px;
  border-radius: inherit;
  background: radial-gradient(circle at center, rgba(255, 255, 255, 0.18), transparent 75%);
  filter: blur(55px);
  opacity: 0.55;
  pointer-events: none;
  z-index: -1;
}

.shell-middle-surface {
  position: relative;
  border-radius: inherit;
  background:
    linear-gradient(180deg, hsl(var(--background) / 0.24), hsl(var(--background) / 0.12));
  backdrop-filter: blur(32px) saturate(1.3);
  -webkit-backdrop-filter: blur(32px) saturate(1.3);
  box-shadow:
    inset 0 1px 0 hsl(var(--border) / 0.35),
    inset 0 -1px 0 hsl(var(--border) / 0.08),
    0 12px 28px hsl(var(--background) / 0.35);
}

.dark .shell-middle-scroll {
  background-image:
    radial-gradient(circle at 45% 35%, hsl(var(--background) / 0.38) 0%, hsl(var(--background) / 0.2) 45%, transparent 78%),
    radial-gradient(circle at 50% 70%, hsl(var(--background) / 0.26) 0%, transparent 70%),
    linear-gradient(180deg, hsl(var(--background) / 0.32), hsl(var(--background) / 0.14));
  box-shadow:
    inset 0 0 65px hsl(var(--background) / 0.26),
    inset 0 0 2px hsl(var(--border) / 0.45);
}

.dark .shell-middle-surface {
  background: linear-gradient(180deg, hsl(var(--background) / 0.48), hsl(var(--background) / 0.28));
  box-shadow:
    inset 0 1px 0 hsl(var(--border) / 0.45),
    inset 0 -1px 0 hsl(var(--border) / 0.25);
}

/* --- Glow Effect --- */
.glow-enabled {
  box-shadow: 0 0 15px 0px hsl(var(--primary) / 0.05) !important;
  transition: box-shadow 0.3s ease;
}

.glow-enabled:hover {
  box-shadow: 0 0 25px 0px hsl(var(--primary) / 0.1) !important;
}

/* --- Gradual Blur --- */
.gradual-blur {
  isolation: isolate;
}

.gradual-blur-inner {
  position: relative;
  width: 100%;
  height: 100%;
}

.gradual-blur-inner>div {
  -webkit-backdrop-filter: inherit;
  backdrop-filter: inherit;
}

@supports not (backdrop-filter: blur(1px)) {
  .gradual-blur-inner>div {
    background: hsl(var(--background) / 0.5);
  }
}

@media (prefers-reduced-motion: reduce) {

  .shell-glass,
  .glow-enabled {
    transition: none;
  }
}